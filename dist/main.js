(()=>{"use strict";class e{constructor(e,t,s,r){this._title=e,this._link=t,this._template=s,this._openPopupImage=r}_getTemplate(){const e=document.querySelector(this._template).content.querySelector(".element").cloneNode(!0);return this._likeCardButton=e.querySelector(".element__button-heart"),this._elementImage=e.querySelector(".element__photo"),e}generateCard(){return this._element=this._getTemplate(),this._elementImage.src=this._link,this._element.querySelector(".element__name").textContent=this._title,this._elementImage.alt=this._title,this._setEventListeners(),this._element}_setEventListeners(){this._element.querySelector(".element__button-trash").addEventListener("click",(()=>{this._handleDeleteCard()})),this._likeCardButton.addEventListener("click",(()=>{this._handleLikeCard()})),this._elementImage.addEventListener("click",(()=>{this._openPopupImage(this._title,this._link)}))}_handleDeleteCard(){this._element.remove(),this._element=null}_handleLikeCard(){this._likeCardButton.classList.toggle("element__button-heart_theme-dark")}}class t{constructor(e,t){this._config=e,this._form=t}_hiddenError(e){const t=e.id;this._errorInput=this._form.querySelector(`#${t}-error`),this._errorInput.classList.remove(this._config.errorClassActive),this._errorInput.textContent=""}_showError(e){const t=e.id;this._errorInput=this._form.querySelector(`#${t}-error`),e.classList.add(this._config.errorClass),this._errorInput.classList.add(this._config.errorClassActive),this._errorInput.textContent=e.validationMessage}_toggleErrorState(e){e.validity.valid?this._hiddenError(e):this._showError(e)}_disableButton=()=>{this._submitButton.setAttribute("disabled",!0),this._submitButton.classList.add(this._config.buttonDisabledClass)};_enableButton=()=>{this._submitButton.removeAttribute("disabled"),this._submitButton.classList.remove(this._config.buttonDisabledClass)};_togglePopupButton(){this._formIsValid=this._inputs.every((e=>e.validity.valid)),this._formIsValid?this._enableButton():this._disableButton()}_setEventListeners=()=>{this._inputs=Array.from(this._form.querySelectorAll(this._config.inputSelector)),this._submitButton=this._form.querySelector(this._config.buttonSelector),this._inputs.forEach((e=>{e.addEventListener("input",(()=>{this._toggleErrorState(e),this._togglePopupButton(e)})),this._togglePopupButton(e)}))};enableValidation=()=>{this._setEventListeners()};resetValidation(){this._disableButton(),this._inputs.forEach((e=>{this._hiddenError(e)}))}}class s{constructor(e){this._popup=document.querySelector(e)}open(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popup.addEventListener("click",(e=>{const t=e.target.classList;(t.contains("popup")||t.contains("popup__close-button"))&&this.close()}))}}class r extends s{constructor({popupSelector:e,handleFormSubmit:t}){super(e),this._handleFormSubmit=t,this._form=this._popup.querySelector(".form"),this._inputList=this._form.querySelectorAll(".form__item")}close(){super.close(),this._form.reset()}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this.close()}))}}console.log("dadada");const o=document.querySelector(".profile__edit-button"),n=document.querySelector(".popup_profile"),i=document.querySelector(".popup_add"),l=document.querySelector(".form__item_input_name"),a=document.querySelector(".form__item_input_description"),_=document.querySelector(".profile__add-button"),c={inputSelector:".form__item",buttonSelector:".form__submit-button",buttonDisabledClass:"form__submit-button_disabled",errorClassActive:".form__item-error_active",errorClass:".form__item-error"},d=new t(c,i);d.enableValidation(),new t(c,n).enableValidation();const p=new class{constructor({items:e,renderer:t},s){this._renderedItems=e,this._renderer=t,this._container=document.querySelector(s)}addItem(e){this._container.prepend(e)}renderItems(){this._renderedItems.forEach((e=>{this._renderer(e)}))}}({items:[{title:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{title:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{title:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{title:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{title:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{title:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],renderer:e=>{const t=v(e.title,e.link,"#card-template");p.addItem(t)}},".elements");p.renderItems();const u=new class{constructor({nameSelector:e,infoSelector:t}){this._name=document.querySelector(e),this._info=document.querySelector(t)}getUserInfo(){return{name:this._name.textContent,info:this._info.textContent}}setUserInfo(e,t){this._name.textContent=e,this._info.textContent=t}}({nameSelector:".profile__name",infoSelector:".profile__description"}),h=new class extends s{constructor(e){super(e),this._photo=this._popup.querySelector(".popup__photo"),this._title=this._popup.querySelector(".popup__subtitle")}open(e,t){super.open(),this._photo.src=t,this._photo.alt=e,this._title.textContent=e}}(".popup_image"),m=new r({popupSelector:".popup_add",handleFormSubmit:e=>{p.addItem(v(e.title,e.link,"#card-template")),m.close()}}),f=new r({popupSelector:".popup_profile",handleFormSubmit:e=>{u.setUserInfo(e.name,e.info)}});function v(t,s,r){return new e(t,s,r,(()=>h.open(t,s))).generateCard()}o.addEventListener("click",(()=>{f.open(),l.value=u.getUserInfo().name,a.value=u.getUserInfo().info})),_.addEventListener("click",(()=>{m.open(),d.resetValidation()})),m.setEventListeners(),h.setEventListeners(),f.setEventListeners()})();